pre-commit:
  parallel: true
  commands:
    lint-web:
      glob: "apps/web/src/*.{js,ts,cjs,mjs,d.cts,d.mts,jsx,tsx,json,jsonc}"
      run: |
        bunx biome check --write --diagnostic-level=error {staged_files}
        if [ $? -eq 0 ]; then
          echo 'ğŸ‰ No error found: committing this now.... âœ¨ğŸš€ğŸ„â€â™‚ï¸ğŸ»'
        else
          echo 'ğŸ”¨âŒ Yoo, you have a problem in your code. Check linter ğŸ”¨âŒ'
          echo '          Run bunx biome check --write --diagnostic-level=error, add changes and try commit again.'
          exit 1
        fi
      stage_fixed: true
    lint-wallet-tracker:
      glob: "apps/wallet-tracker/*.{js,ts,cjs,mjs,d.cts,d.mts,jsx,tsx,json,jsonc}"
      run: |
        bunx biome check --write --diagnostic-level=error {staged_files}
        if [ $? -eq 0 ]; then
          echo 'ğŸ‰ No error found: committing this now.... âœ¨ğŸš€ğŸ„â€â™‚ï¸ğŸ»'
        else
          echo 'ğŸ”¨âŒ Yoo, you have a problem in your code. Check linter ğŸ”¨âŒ'
          echo '          Run bunx biome check --write --diagnostic-level=error, add changes and try commit again.'
          exit 1
        fi
      stage_fixed: true

pre-push:
  commands:
    lint-web:
      glob: "apps/web/src/*.{js,ts,cjs,mjs,d.cts,d.mts,jsx,tsx,json,jsonc}"
      run: |
        bunx biome check --diagnostic-level=error {all_files}
        if [ $? -ne 0 ]; then
          echo 'ğŸ”¨âŒ Push blocked! Fix linting errors before pushing. ğŸ”¨âŒ'
          exit 1
        fi
    lint-wallet-tracker:
      glob: "apps/wallet-tracker/*.{js,ts,cjs,mjs,d.cts,d.mts,jsx,tsx,json,jsonc}"
      run: |
        bunx biome check --write --diagnostic-level=error {staged_files}
        if [ $? -eq 0 ]; then
          echo 'ğŸ‰ No error found: committing this now.... âœ¨ğŸš€ğŸ„â€â™‚ï¸ğŸ»'
        else
          echo 'ğŸ”¨âŒ Yoo, you have a problem in your code. Check linter ğŸ”¨âŒ'
          echo '          Run bunx biome check --write --diagnostic-level=error, add changes and try commit again.'
          exit 1
        fi

    build:
      glob: "apps/web/**/*"
      run: |
        cd apps/web && bun run build
        if [ $? -ne 0 ]; then
          echo 'ğŸ”¨âŒ Push blocked! Fix build errors before pushing. ğŸ”¨âŒ'
          exit 1
        fi
